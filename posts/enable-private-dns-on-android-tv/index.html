<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Enable Private DNS on Android TV - Rudy Susanto</title><meta name=description content><link rel=stylesheet href=../../css/theme.min.css><link rel="shortcut icon" type=image/png href=https://rsusanto.com/images/avatar.png></head><body><div id=content class=mx-auto><header class="container mt-sm-5 mt-4 mb-4 mt-xs-1"><div class=row><div class="col-sm-4 col-12 text-sm-right text-center pt-sm-4"><a href=../../ class=text-decoration-none><img id=home-image class=rounded-circle src=../../images/avatar.png></a></div><div class="col-sm-8 col-12 text-sm-left text-center"><h2 class="m-0 mb-2 mt-4"><a href=../../ class=text-decoration-none>Rudy Susanto</a></h2><p class="text-muted mb-1">Web Developer | Sidoarjo, ID ðŸ‡®ðŸ‡©</p><ul id=nav-links class="list-inline mb-2"><li class=list-inline-item><a class="badge badge-white" href=../../about/ title=About>About</a></li><li class=list-inline-item><a class="badge badge-white" href=../../posts/ title=Posts>Posts</a></li><li class=list-inline-item><a class="badge badge-white" href=../../categories/ title=Categories>Categories</a></li></ul><ul id=nav-social class=list-inline><li class="list-inline-item mr-3"><a href=https://github.com/rsusanto target=_blank><i class="fab fa-github fa-1x text-muted"></i></a></li><li class="list-inline-item mr-3"><a href=https://gitlab.com/rsusanto target=_blank><i class="fab fa-gitlab fa-1x text-muted"></i></a></li><li class="list-inline-item mr-3"><a href=https://profiles.wordpress.org/rsusanto/ target=_blank><i class="fab fa-wordpress fa-1x text-muted"></i></a></li><li class="list-inline-item mr-3"><a href=https://www.linkedin.com/in/rudy-susanto/ target=_blank><i class="fab fa-linkedin fa-1x text-muted"></i></a></li></ul></div></div><hr></header><div class=container><div class=pl-sm-2><div class=mb-3><h3 class=mb-0>Enable Private DNS on Android TV</h3><small class=text-muted>Published May 20, 2024</small></div><article><p>Android comes with a setting called Private DNS that allows us to use <a href=https://en.wikipedia.org/wiki/DNS_over_TLS target=_blank>DNS-over-TLS</a> instead of a regular DNS as the system-wide domain resolver.
However, because that setting is hidden on AndroidÂ TV, enabling it there is not as easy as enabling it on Android smartphones.</p><p>But thanks to Android&rsquo;s Developer Mode, we can enable it on Android TV via <abbr title="Android Debug Bridge">ADB</abbr> command.
The following below are the steps to enable it there.</p><h4 id=enable-the-developer-mode>Enable the Developer Mode</h4><ol><li>The first step is to enable Developer Mode on Android TV. We do it similarly to Android smartphones by clicking the build number information,
which can be found in the <code>Settings > Device Preferences > About > Android TV OS build</code> menu. Just click/tap it seven times!</li><li>The second step is to enable the USB debugging option. Go to the <code>Settings > Device Preferences > Developer options</code> menu and enable the <code>USB debugging</code> option.</li><li>After that, we need to know the TV&rsquo;s IP address, whichÂ can be foundÂ in the <code>Settings > Network & Internet</code> menu. Select the connected network and look for the IP address information.</li></ol><p>Now that the TV is configured to allow remote access, we need a computer to enable the Private DNS remotely.</p><h4 id=setting-it-up-remotely-from-a-computer>Setting it up remotely from a computer</h4><ol start=4><li>The computer has to be connected to the same local network andÂ already installed the <code>adb</code> command.</li><li>Connect to the TV using the following command. Replace the IP address in the example with the TV&rsquo;s IP. On the first attempt, it will likely fail.
No worries! Just check the TV screen and click Allow on the dialog box notice that is popping up there. TryÂ to connect again with the same command.
It should be successful the second time.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#6272a4># note: it will be failed on the first attempt</span>
</span></span><span style=display:flex><span>adb connect 192.168.1.xxx
</span></span></code></pre></div><ol start=6><li>Run the following commands. Substitute the DNS with your preferred DNS-over-TLS service.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>adb shell settings put global private_dns_mode hostname
</span></span><span style=display:flex><span><span style=color:#6272a4># note: substitute family.cloudflare-dns.com with your preferred dns</span>
</span></span><span style=display:flex><span>adb shell settings put global private_dns_specifier family.cloudflare-dns.com
</span></span></code></pre></div><h4 id=testing-and-cleaning-up>Testing and cleaning-up</h4><p>To verify that everything works fine, install a browser on the TV and navigate to <a href=https://www.dnsleaktest.com/ target=_blank>dnsleaktest.com</a>.
Check if the correct DNS server is showing up there. It should show Cloudflare&rsquo;s server if you use the same DNS as the above example.
Or, if you are like me, using NextDNS, you can open <a href=https://test.nextdns.io/ target=_blank>test.nextdns.io</a> and see the result there.</p><p>Last thing, if everything works as expected, we can set the Developer Mode back to its initial state.
Go to the <code>Settings > Device Preferences > Developer options</code> menu and turn off the first option.</p><p>VoilÃ ! The Android TV is now using Private DNS nicely.</p></article><br><br><script src=https://giscus.app/client.js data-repo=rsusanto/rsusanto.github.io data-repo-id=R_kgDOGqEIrA data-category=Announcements data-category-id=DIC_kwDOGqEIrM4CdIkl data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=light data-lang=en data-loading=lazy crossorigin=anonymous async></script><br><br></div></div></div><footer class="text-center pb-1"><small class=text-muted>&copy; 2024 Rudy Susanto<br>Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a>
and <a href=https://github.com/austingebauer/devise target=_blank>Devise</a></small></footer></body></html>